---
# roles/monitoring/elastic_agent/tasks/main.yml

- name: Install Elastic Agent
  ansible.builtin.include_tasks: install.yml
  when: not (elastic_agent_skip_install | default(false))
  tags:
    - install

- name: Configure Elastic Agent
  ansible.builtin.include_tasks: configure.yml
  when: elastic_agent_configure | default(false)
  tags:
    - configure

- name: Ensure Elastic Agent is running
  ansible.builtin.include_tasks: service.yml
  when: elastic_agent_manage_service | default(true)
  tags:
    - service
