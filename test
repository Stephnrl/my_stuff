# playbook.yml
---
- name: Deploy to Azure GCC High
  hosts: localhost
  connection: local
  gather_facts: false
  
  tasks:
    - name: Authenticate with Azure using OIDC
      snc.azure_utils.azure_oidc_login:
        tenant_id: "{{ lookup('env', 'AZURE_TENANT_ID') }}"
        client_id: "{{ lookup('env', 'AZURE_CLIENT_ID') }}"
        subscription_id: "{{ lookup('env', 'AZURE_SUBSCRIPTION_ID') }}"
        gcc_high: true
    
    - name: Create resource group in GCC High
      azure.azcollection.azure_rm_resourcegroup:
        name: my-rg
        location: usgovvirginia
        state: present
