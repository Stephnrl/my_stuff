################################################################################
# Namespace
################################################################################

output "namespace" {
  description = "The namespace where resources are deployed"
  value       = var.namespace
}

################################################################################
# Service Account
################################################################################

output "service_account_name" {
  description = "Name of the created service account"
  value       = var.create_service_account ? kubernetes_service_account.this[0].metadata[0].name : var.service_account_name
}

################################################################################
# Pod Identity
################################################################################

output "pod_identity_role_arn" {
  description = "ARN of the IAM role created for Pod Identity"
  value       = var.create_pod_identity_role ? aws_iam_role.pod_identity[0].arn : var.existing_pod_identity_role_arn
}

output "pod_identity_role_name" {
  description = "Name of the IAM role created for Pod Identity"
  value       = var.create_pod_identity_role ? aws_iam_role.pod_identity[0].name : null
}

output "pod_identity_association_id" {
  description = "ID of the EKS Pod Identity association"
  value       = var.create_pod_identity_association ? aws_eks_pod_identity_association.this[0].association_id : null
}

################################################################################
# RBAC
################################################################################

output "cluster_role_name" {
  description = "Name of the created ClusterRole"
  value       = var.create_cluster_role ? kubernetes_cluster_role.this[0].metadata[0].name : null
}

output "cluster_role_binding_name" {
  description = "Name of the created ClusterRoleBinding"
  value       = var.create_cluster_role ? kubernetes_cluster_role_binding.this[0].metadata[0].name : null
}

################################################################################
# Secrets
################################################################################

output "secret_provider_class_name" {
  description = "Name of the created SecretProviderClass"
  value       = var.create_secret_provider_class ? "${var.app_name}-secrets" : null
}

################################################################################
# Helm
################################################################################

output "helm_release_name" {
  description = "Name of the Helm release"
  value       = var.deploy_helm_chart ? helm_release.this[0].name : null
}

output "helm_release_version" {
  description = "Version of the deployed Helm chart"
  value       = var.deploy_helm_chart ? helm_release.this[0].version : null
}

output "helm_release_status" {
  description = "Status of the Helm release"
  value       = var.deploy_helm_chart ? helm_release.this[0].status : null
}

output "helm_release_metadata" {
  description = "Metadata of the Helm release"
  value       = var.deploy_helm_chart ? helm_release.this[0].metadata : null
}
